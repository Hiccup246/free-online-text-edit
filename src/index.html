<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Free online text edit</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="A simple free online text area with a word and line count for copy and pasting online internet text without formatting">
    <meta name="keywords" content="freeonlinetextedit, text edit, textarea, free online text edit, free online textarea, notepad, wordpad">
    <meta name="author" content="James Watt">
    <link rel="stylesheet" type="text/css" media="screen" href="index.css">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">
    <link rel="canonical" href="https://freeonlinetextedit.com">
    <link rel="canonical" href="https://freeonlinetextedit.com">
    <link rel="publisher">
    <!-- Umami Analytics Tracking Tag -->
    <script async defer data-website-id="c59002b5-2b3b-42af-b9a0-2d1c5ecf2a46" src="https://umami-production-9a03.up.railway.app/umami.js"></script>
  </head>

  <body>
    <textarea autofocus oninput="metrics()" id="textarea"></textarea>
    <div class="message">
      <james-watt-calling-card modal-bg-color="#F3EFE0">
        <div class="message__description">Peace and love, peace and love!</div>
      </james-watt-calling-card>

      <button class="message__dwl-button" onclick="downloadToTxt()">Download as .txt</button>

      <div class="message__textarea-counts">
        <span id="word-count">Word Count: 0</span>
        <span id="line-count">Line Count: 1</span>
      </div>
    </div>

    <script>
      function metrics() {
        const textarea = document.getElementById("textarea").value;
        const wordSplit = textarea.split(" ");
        const newLinesCount = textarea.split(/\r\n|\r|\n/).length
        var wordCount = 0;

        for (var i = 0; i < wordSplit.length; i++) {
          if (wordSplit[i] != "") {
              wordCount += 1;
          }
        }

        document.getElementById("word-count")
          .innerHTML = "Word Count: " + wordCount;

        document.getElementById("line-count")
          .innerHTML = "Line Count: " + newLinesCount;
      }

      // Code inspired from https://robkendal.co.uk/blog/2020-04-17-saving-text-to-client-side-file-using-vanilla-js
      function downloadToTxt() {
        const a = document.createElement("a");
        const content = document.getElementById("textarea").value
        const file = new Blob([content], {type: "text/plain"});
        
        a.href= URL.createObjectURL(file);
        a.download = "text-edit-notes.txt";
        a.click();

        URL.revokeObjectURL(a.href);
      }
    </script>
  </body>
</html>